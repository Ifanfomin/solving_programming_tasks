kv1 = [[0, 0], [0, 1], [0, 2],
       [1, 0], [1, 1], [1, 2],
       [2, 0], [2, 1], [2, 2]]

kv2 = [[0, 3], [0, 4], [0, 5],
       [1, 3], [1, 4], [1, 5],
       [2, 3], [2, 4], [2, 5]]

kv3 = [[0, 6], [0, 7], [0, 8],
       [1, 6], [1, 7], [1, 8],
       [2, 6], [2, 7], [2, 8]]

kv4 = [[3, 0], [3, 1], [3, 2],
       [4, 0], [4, 1], [4, 2],
       [5, 0], [5, 1], [5, 2]]

kv5 = [[3, 3], [3, 4], [3, 5],
       [4, 3], [4, 4], [4, 5],
       [5, 3], [5, 4], [5, 5]]

kv6 = [[3, 6], [3, 7], [3, 8],
       [4, 6], [4, 7], [4, 8],
       [5, 6], [5, 7], [5, 8]]

kv7 = [[6, 0], [6, 1], [6, 2],
       [7, 0], [7, 1], [7, 2],
       [8, 0], [8, 1], [8, 2]]

kv8 = [[6, 3], [6, 4], [6, 5],
       [7, 3], [7, 4], [7, 5],
       [8, 3], [8, 4], [8, 5]]

kv9 = [[6, 6], [6, 7], [6, 8],
       [7, 6], [7, 7], [7, 8],
       [8, 6], [8, 7], [8, 8]]

kv_all = [kv1, kv2, kv3, kv4, kv5, kv6, kv7, kv8, kv9]

board = [[".",".","9","7","4","8",".",".","."],
         ["7",".",".",".",".",".",".",".","."],
         [".","2",".","1",".","9",".",".","."],
         [".",".","7",".",".",".","2","4","."],
         [".","6","4",".","1",".","5","9","."],
         [".","9","8",".",".",".","3",".","."],
         [".",".",".","8",".","3",".","2","."],
         [".",".",".",".",".",".",".",".","6"],
         [".",".",".","2","7","5","9",".","."]]
# [["5","3",".",".","7",".",".",".","."],
# ["6",".",".","1","9","5",".",".","."],
# [".","9","8",".",".",".",".","6","."],
# ["8",".",".",".","6",".",".",".","3"],
# ["4",".",".","8",".","3",".",".","1"],
# ["7",".",".",".","2",".",".",".","6"],
# [".","6",".",".",".",".","2","8","."],
# [".",".",".","4","1","9",".",".","5"],
# [".",".",".",".","8",".",".","7","9"]]
mn_norm = set(["1", "2", "3", "4", "5", "6", "7", "8", "9"])
iterations = 0
while any(["." in i for i in board]):
    iterations += 1
    s_1 = sum([i.count('.') for i in board])
    for str_1 in board:
        for t_1_ind in range(len(str_1)):
            str_ind = board.index(str_1)
            t_1 = str_1[t_1_ind]
            if t_1 == '.':
                mn_t = []
                for t_2_ind in range(len(str_1)):
                    t_2 = str_1[t_2_ind]
                    if t_2 != '.':
                        mn_t.append(t_2)
                for str_2 in board:
                    t_2 = str_2[t_1_ind]
                    if t_2 != '.':
                        mn_t.append(t_2)
                for kv in kv_all:
                    for kv_ind in kv:
                        str_ind = board.index(str_1)
                        if kv_ind[0] == str_ind and kv_ind[1] == t_1_ind:
                            n_kv = kv
                            break
                for t_kv_ind in n_kv:
                    t_kv = board[t_kv_ind[0]][t_kv_ind[1]]
                    if t_kv != '.':
                        mn_t.append(t_kv)
                mn_t = set(mn_t)
                if len(mn_t) == 8:
                    ch = list(mn_norm - mn_t)[0]
                    board[str_ind][t_1_ind] = ch

    [print('  '.join(i)) for i in board]
    print(iterations)
    print(sum([i.count('.') for i in board]))
